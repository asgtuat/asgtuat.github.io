<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>知能情報システム工学実験 1A(シェルスクリプト)</title>
    <link rel="stylesheet" type="text/css" href="./asg.css">
  </head>
  <body>
    
    <table align="center" width="1000px">

      <tr><td>
	  
	  <h1>知能情報システム工学実験 1A(シェルスクリプト)</h1>
	  
	  <div>
	    <p>本課題では，シェルスクリプトを理解を通じて，煩雑な処理を手軽に行うための技術を身につけることを目的とする．シェルスクリプトとは，シェル(コマンドを入力してオペレーティングシステムに指示を出すためのインターフェースである．Linux でいうターミナル，Windows でいうコマンドプロンプト)で実行するコマンドを用いて記述されたプログラムを指す．シェルには，便利なコマンドが複数用意されており，これらを組み合わせ使うと，人手では煩雑で大変な仕事を簡単に行うことができる．たとえば，1,000 個のファイルから``Linux''という文字列を含む，ファイルサイズが 1 KB 以上のファイル名を列挙したり，CSV 形式の 10,000 個のファイルの第 2 要素が 100 以上の要素で構成される CSV を作成することが容易にできる．本課題を通して，コンピュータ上での作業を効率的に行う方法(楽する方法)を身につけ，生産性向上の一助となることを期待している．</p>
	  </div>
	  <br>
	  <ul>
	      <li class="index"><a class="index" href="index.html">説明(シェルスクリプトの基本)</li>
	      <li class="index"><a class="index" href="advanced.html">説明(応用)</a></li>
	      <li class="index"><a class="index" href="slide.html">説明スライド</an></li>
	      <li class="index">課題</li>
	      <li class="index"><a class="index" href="submit.html">レポートの提出</a></li>
	    </ul>
	      <br><hr color="blue">

	      <p>課題 1 から 4 までに取り組み，答えをレポートにまとめよ．発展課題は必須ではないが，ぜひともチャレンジして欲しい．</p>

	      <h2>課題1</h2>
	      <p> 数値を与えると，数値を出力するプログラム <a href="./program/unknown.c">unknown.c</a> が存在する(中身は理解しなくてよい)．このとき，以下の問に答えよ．なお，シェルは何を用いてもよい．</p>
	      <p><b>1-1:</b> プログラム unknown.c をコンパイルし，1 から 10 までの入力を与えるとどのような出力結果が得られるか．実行して確認せよ．</p>
              <p><b>1-2:</b> 1 から 500 までの入力を与えて，その出力結果を unknown.log に出力するシェルスクリプトを作成せよ．出力したファイルの内容はレポートには記載せず，ファイルを添付せよ．</p>
	      <p><b>1-3:</b> 1 から 500 までの入力を与えて，その間の最大値と最小値，およびそのときに入力した数値を出力するシェルスクリプトをそれぞれ作成せよ．</p></p>
              <p><b>1-4</b> 1 から 500 までの入力を与えたときの結果を標準出力に出力するスクリプトを用意し，最大値および最小値を表示するコマンドをパイプを用いて 1 行でそれぞれ実現せよ(ヒント: sort，head，tail コマンドを調べるとよい)．
	      <p><b>1-5(発展課題): </b>最大値，最小値を出力するスクリプトを別のスクリプト言語(python や ruby など)でも作成し，両者の記述性について述べよ．</p>

	      <h2>課題2</h2>
	      <p>ある年における各国のビールの消費量をまとめた<a href="./data/beer.dat">データ<a>がある．このファイルは，左から 1.国名，2.一人あたりのビール消費量(リットル/人)，総消費量(千キロリットル)が格納されている．各データはタブで区切られている．今，一人あたりのビール消費量が最大である国名を出力するスクリプト<a href="./program/max_per_person.py"> max_per_person.py</a> がある．これは Python で記述されており，引数に上記データファイルを受け取る(./max_per_person.py beer.dat と使う)．</p>
              <p><b>課題2-1:</b> max_per_person.py の13行目から19行目は何をやっているか．プログラムの意図(心)を述べよ．</p>
              <p><b>課題2-2:</b> max_per_person.py を拡張しながら，以下のスクリプトを作成せよ．</p>
	      <ul>
		<li><p><b>(a):</b> 総消費量が最大の国名を出力するスクリプト</p></li>
		<li><p><b>(b):</b> 一人あたりの消費量をボトル/人(1ボトル633ミリリットル)に変換した，beer_bottle.dat を作成するスクリプト．ファイルの内容はレポートには記述せず，ファイルを添付せよ．</p></li>
		<li><p><b>(c):</b> 一人あたりの消費量と総消費量を Japan を基準とした割合(日本を1とする)に変換した，beer_japanese_average.dat を生成するスクリプト．ファイルの内容はレポートには記述せず，ファイルを添付せよ．</p></li>
	      </ul>

<p><b>2-3(発展課題):</b> awk コマンドを使って max_per_person.py と同じ機能を実現するシェルスクリプトを作成し，両者の記述性について述べよ．</p>


	      <h2>課題3</h2>
	      <p> 気象庁(http://www.jma.go.jp/jma/index.html)が観測した，<a href="./data/weatherF.dat">F 市のデータ<a>がある．2017 年 1 月から 10 月までの気象データが格納されており，左より 1.日付，2.一日の平均気温，3.最高気温，4.最低気温，5.降水量，6.日照時間，7.平均風速，8.最高風速，9.最高瞬間風速，の値が示されている．このとき以下の問に答えよ．なお，作成するスクリプトはシェルスクリプトでもよいし，スクリプト言語(Python など)を用いたものでもよい．</p>
	      <p><b>3-1:</b> 日付以外の各項目における最大値，最小値を観測した日付を出力するスクリプトを作成せよ．</p>
	      <p><b>3-2:</b> 一日の平均気温，降水量，日照時間の月別の平均値を出力するスクリプトを作成せよ．</p>
	      <p><b>3-3:</b> 今，新たに<a href="./data/weatherW.dat">W 市のデータ</a>と<a href="./data/weatherK.dat">K 市のデータ</a>が追加された．これら 3 都市の全データを走査し，平均気温，最高気温，最低気温の 1.最大値と最小値，2.それぞれの日，3.都市名，を出力するスクリプトを作成せよ．</p>
	      

	      <h2>課題4</h2>
	      <p> Facebook や Google といった大規模なウェブサービスを考える．こうしたサービスは，多数の高性能マシン(サーバマシンと呼ぶ)を連携することで実現されている．今，これらのサーバマシンの状態を表したログがラック(サーバ計算機を格納する箱)ごとにある．ラックは全部で 100 台ある．ログには，1.サーバの ID(ID)，2.現在稼働しているか否か(STATUS)，3.連続稼動時間(HOURS)，4.直近でサーバマシンが停止した理由(SYMPTOM)，が記載されている．このとき，以下の問に答えよ．ログはこの<a href="./racklogs.tar.gz">ファイル</a>に圧縮されている．``tar zxf racklogs.tar.gz''で解凍できる．なお，作成するスクリプトはシェルスクリプトでもよいし，スクリプト言語(Python など)を用いたものでもよい．</p>

	      <p><b>4-1:</b> データセンタ内で現在稼働しているサーバマシンの割合(つまり全ラック中の全サーバマシンにおいて稼働中のサーバマシンの割合)を計算するスクリプトを作成せよ．STATUS は OK であれば稼働中，DOWN であれば停止中である．また，各ラックのサーバマシンの平均稼働時間の長い上位 3 位のラック名を出力するスクリプトを作成せよ．</p>

              <p><b>4-2:</b> サーバマシンが停止した理由をその割合とともランク付けするスクリプトを作成せよ．SYMPTOM は MAINTENACE(メンテナンス), DISK FAILURE(ディスク故障)，POWER FAILURE(電源障害)，CPU ERROR(CPU のエラー)，MEMORY ERROR(メモリエラー)，UNKNOWN ERROR(原因不明)に別れている．</p>

              <p><b>4-3:</b> rack1 から rack10 までのデータをエクセルでみるために，これらのログを 1 つの CSV(Comma Separated Values) 形式のファイルにまとめることを考える．CSV 形式は各項目をカンマで区切った形式のファイルである．サーバの ID とラック名をハイフンでつなげ(たとえば rack1 の server1 であれば server1-rack1)，rack1 から rack10 のデータを 1 つの CSV 形式に集約するスクリプトを作成せよ．</p>

	      <p><b>4-4(発展課題):</b> スライドや本ページ説明したような，あるプログラムを動かしてその挙動を監視するようなスクリプトを記述し，そのリソース使用率をグラフ化せよ．監視するプログラムやリソース(CPU やメモリ，ディスク使用量など)はなんでもよい．</p>
    </table>
  </body>
</html>
